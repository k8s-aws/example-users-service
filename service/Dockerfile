FROM node

ARG BACKEND_PORT
ARG BACKEND_HOST
ARG MYSQL_HOST
ARG MYSQL_PORT
ARG MYSQL_USER
ARG MYSQL_PASSWORD
ARG MYSQL_DB

ENV BACKEND_PORT=$BACKEND_PORT
ENV BACKEND_HOST=$BACKEND_HOST
ENV MYSQL_HOST=$MYSQL_HOST
ENV MYSQL_PORT=$MYSQL_PORT
ENV MYSQL_USER=$MYSQL_USER
ENV MYSQL_PASSWORD=$MYSQL_PASSWORD
ENV MYSQL_DB=$MYSQL_DB


WORKDIR /app

COPY . /app/

RUN npm i
# RUN node /app/init.js

EXPOSE $BACKEND_PORT

CMD [ "node","/app/server.js" ]
